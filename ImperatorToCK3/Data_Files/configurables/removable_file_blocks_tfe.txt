# This file contains blocks from The Fallen Eagle files that can be removed.
# The structure is as follows:

# <file name> = {
# 	{
#          # comments are supported inside
#          some = code
#   }
# 	{
#          some code
# 	                some code with other indent
#   }
# }

# INDENTATION IS IMPORTANT!
# ASIDE FROM THE CURLY BRACKETS SURROUNDING THE BLOCK, IT MUST MATCH THE ORIGINAL FILE.
# OTHERWISE THE BLOCK WON'T BE REMOVED!

"common/on_action/TFE_game_start.txt" = {
	# Struggle starts
	{
		if = {
			limit = {
				AND = {
					game_start_date >= 476.9.4
					game_start_date <= 768.1.1
				}
			}
			start_struggle = { struggle_type = britannia_struggle start_phase = struggle_britannia_phase_migration }
		}
	}
	{
		if = {
			limit = {
				game_start_date >= 476.9.4
			}
			start_struggle = { struggle_type = italian_struggle start_phase = struggle_TFE_italian_phase_turmoil }
		}
	}
	{
		if = {
			limit = {
				AND = {
					game_start_date <= 651.1.1 # Death of Yazdegerd III
				}
			}
			start_struggle = { struggle_type = roman_persian_struggle start_phase = struggle_TFE_roman_persian_phase_contention }
		}
		start_struggle = { struggle_type = eastern_iranian_struggle start_phase = struggle_TFE_eastern_iranian_phase_expansion }
		start_struggle = { struggle_type = north_indian_struggle start_phase = struggle_TFE_north_indian_phase_invasion }
	}
	
	# Other
	{
		#### Starting events stuff
		if = {
			limit = {
				game_start_date = 395.1.17
			}
			title:k_visigoths.holder ?= {
				trigger_event = gothic_wars.0001
			}
			# Start Huns with de jure drift progress for Eastern European kingdoms
			# Has to be an event that is triggered some time after game start because PDX is a dum dum
			title:e_hunnic_empire.holder ?= {
				trigger_event = {
					id = tfe_title_event.0009
					days = 90
				}
			}
			if = {
				limit = {
					character:rufinus_02 = {
						is_alive = yes
						OR = {
							is_vassal_of = character:70519
							is_courtier_of = character:70519
						}
						NOT = { is_diarch = yes }
					}
				}
				if = {
					limit = {
						character:70519 = {
							has_active_diarchy = no
						}
					}
					character:70519 = {
						designate_diarch = character:rufinus_02
						start_diarchy = regency
						set_diarchy_swing = 40
					}
				}
				else = {
					character:70519 = {
						designate_diarch = character:rufinus_02
						set_diarchy_type = regency
						change_diarchy_swing = 40
					}
				}
			}
			if = {
				limit = {
					character:900062 = {
						is_alive = yes
						OR = {
							is_vassal_of = character:145227
							is_courtier_of = character:145227
						}
						NOT = { is_diarch = yes }
					}
				}
				if = {
					limit = {
						character:145227 = {
							has_active_diarchy = no
						}
					}
					character:145227 = {
						designate_diarch = character:900062
						start_diarchy = regency
						set_diarchy_swing = 40
					}
				}
				else = {
					character:145227 = {
						designate_diarch = character:900062
						set_diarchy_type = regency
						change_diarchy_swing = 40
					}
				}
			}
		}
		if = {
			limit = {
				game_start_date = 476.9.4
				AND = {
					exists = title:k_croatia.holder
					title:k_croatia.holder = {
						culture = {
							OR = {
								THIS = culture:roman
								any_parent_culture_or_above = {
									this = culture:roman
								}
							}
						}
					}
				}
			}
			title:k_croatia.holder = {
				add_character_flag = nepos_ambition_triggered
				trigger_event = {
					id = western_roman.0027
					days = 5
				}
			}
		}
		if = {
			limit = {
				game_start_date = 532.2.1
				character:992023 = {
					is_alive = yes
				}
				title:k_ostrogoths.holder = character:992023
				character:992024 = {
					is_alive = yes
					is_betrothed = no
					is_married = no
				}
				OR = {
					character:rugian_17 = {
						is_alive = yes
						is_landed = yes
						is_betrothed = no
						is_married = no
						is_vassal_of = character:992023
					}
					character:992030 = {
						is_alive = yes
						is_landed = yes
						is_betrothed = no
						is_married = no
						is_vassal_of = character:992023
					}
					character:992100 = {
						is_alive = yes
						is_landed = yes
						is_betrothed = no
						is_married = no
						is_vassal_of = character:992023
					}
				}
			}
			title:k_ostrogoths.holder = {
				trigger_event = {
					id = germanic_events.0014
					days = 1
				}
			}
		}
		if = {
			limit = {
				game_start_date = 532.2.1
				AND = {
					exists = title:e_byzantium.holder
					title:e_byzantium.holder = {
						culture = {
							OR = {
								THIS = culture:roman
								any_parent_culture_or_above = {
									this = culture:roman
								}
							}
						}
					}
				}
			}
			set_global_variable = {
				name = justinian
				value = title:e_byzantium.holder
			}
			set_global_variable = {
				name = justinian_commander
				value = character:belisarius_001
			}
			set_global_variable = {
				name = justinian_gothic_commander
				value = character:belisarius_001
			}
			title:e_byzantium.holder = {
				trigger_event = {
					id = western_roman.0038
					days = 2
				}
				add_character_flag = {
					flag = immune_to_disease
					years = 10
				}
			}
			character:belisarius_001 = {
				set_global_variable = {
					name = belisarius
					value = character:belisarius_001
				}
			}
			character:belisarius_001 = {
				add_character_flag = {
					flag = immune_to_disease
					years = 10
				}
			}
		}
		else = {
			random_ruler = {
				limit = {
					is_ai = yes
					any_courtier = {
						is_lowborn = yes
					}
				}
				random_courtier = {
					limit = {
						is_lowborn = yes
					}
					save_scope_as = bugfix
					set_global_variable = {
						name = justinian
						value = scope:bugfix
					}
					set_global_variable = {
						name = hildirix
						value = scope:bugfix
					}
					death = { 
						death_reason = death_vanished 
					} 
				}
			}
		}
	}
	{
				if = {
					limit = {
						character:992020 = {
							is_alive = yes
							OR = {
								is_vassal_of = character:992023
								is_courtier_of = character:992023
							}
							NOT = { is_diarch = yes }
						}
					}
					if = {
						limit = {
							character:992023 = {
								has_active_diarchy = no
							}
						}
						character:992023 = {
							designate_diarch = character:992020
							start_diarchy = regency
							set_diarchy_swing = 40
						}
					}
					else = {
						character:992023 = {
							designate_diarch = character:992020
							set_diarchy_type = regency
							change_diarchy_swing = 40
						}
					}
				}
	}
	{
		if = {
			limit = {
				current_date >= 530.1.1
				current_date <= 550.1.1
			}
			culture:ostrogothic = {
				change_cultural_acceptance = {
					target = culture:roman
					value = 40
					desc = cultural_acceptance_historical_relations
				}
				change_cultural_acceptance = {
					target = culture:illyro_roman
					value = 40
					desc = cultural_acceptance_historical_relations
				}
			}
			if = {
				limit = {
					exists = title:k_ostrogoths.holder
				}
				if = {
					limit = {
						title:k_ostrogoths.holder.culture = culture:ostrogothic
						title:k_ostrogoths.holder.dynasty = dynasty:99920000
					}
					title:k_ostrogoths.holder.dynasty = {
						add_dynasty_modifier = {
							modifier = tfe_segregated_barbarians_and_romans
							years = 11
						}
					}
				}
				title:k_ostrogoths.holder = {
					learn_language = language_latin
					every_close_family_member = {
						learn_language = language_latin
					}
					every_dynasty_member = {
						learn_language = language_latin
					}
					if = {
						limit = { has_trait = drunkard }
						add_character_modifier = {
							modifier = tragic_drunk_modifier
							years = 3
						}
					}
					else = { add_trait = drunkard }
					if = {
						limit = {
							THIS = character:992023
						}
						add_character_modifier = {
							modifier = the_rightful_king
							years = 5
						}
					}
				}
				
			}
		}
	}
	{
		character:2000003 ?= {
			make_trait_inactive = intellect_good_3
		}
	}
}

"common/on_action/sea_minority_game_start.txt" = {
	{
		# Alans
		if = {
			limit = {
				game_start_date >= 400.1.1
			}
			add_culture_minority_effect = {
				CULTURE = culture:alan
				SIZE = large
				COUNTY = title:c_tunis
			}
			add_faith_minority_effect = {
				FAITH = faith:arianism
				SIZE = large
				COUNTY = title:c_tunis
			}
		}
	}
}

"common/on_action/government_change_on_actions.txt" = {
	{
						NOT = {
							THIS = character:taifal_01
						}
	}
	{
		title:e_mongolia = {
			every_in_de_jure_hierarchy = {
				limit = {
					is_title_created = yes
				}
				holder = {
					if = {
						limit = {
							has_government = tribal_government
						}
						change_government = nomadic_government
					}
				}
			}
		}
		title:e_siberia = {
			every_in_de_jure_hierarchy = {
				limit = {
					is_title_created = yes
				}
				holder = {
					if = {
						limit = {
							has_government = tribal_government
						}
						change_government = nomadic_government
					}
				}
			}
		}
		title:e_volga-ural = {
			every_in_de_jure_hierarchy = {
				limit = {
					is_title_created = yes
				}
				holder = {
					if = {
						limit = {
							has_government = tribal_government
						}
						change_government = nomadic_government
					}
				}
			}
		}
		title:e_tartaria = {
			every_in_de_jure_hierarchy = {
				limit = {
					is_title_created = yes
				}
				holder = {
					if = {
						limit = {
							has_government = tribal_government
						}
						change_government = nomadic_government
					}
				}
			}
		}
		title:k_oghuz_il = {
			every_in_de_jure_hierarchy = {
				limit = {
					is_title_created = yes
				}
				holder = {
					if = {
						limit = {
							has_government = tribal_government
						}
						change_government = nomadic_government
					}
				}
			}
		}
		title:e_rajastan = {
			every_in_de_jure_hierarchy = {
				limit = {
					is_title_created = yes
				}
				holder = {
					if = {
						limit = {
							culture ?= {
								has_cultural_tradition = tradition_gana_sangha
							}
							government_has_flag = government_is_tribal
						}
						change_government = gana_sangha_government
						primary_title = {
							add_title_law = gana_sangha_elective_succession_law
						}
					}
				}
			}
		}
	}
}

"common/on_action/tribs_on_action.txt" = {
	{
		if = {
			limit = {
				AND = {
					game_start_date > 361.1.1
					game_start_date < 362.1.1
				}
			}
			###GUPTAS
			# Kushans
			if = {
				limit = {
					AND = {
						exists = character:kushan_014
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:kushan_014
					SUZERAIN = character:900963 
				}
			}
			# Madrakas
			if = {
				limit = {
					AND = {
						exists = character:matraka_01
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:matraka_01
					SUZERAIN = character:900963 
				}
			}
			# Yaudheyas
			if = {
				limit = {
					AND = {
						exists = character:yaudheya_01
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:yaudheya_01
					SUZERAIN = character:900963 
				}
			}
			# Malavas
			#if = {
			#	limit = {
			#		AND = {
			#			exists = character:malava_01
			#			exists = character:900963
			#		}
			#	}
			#	make_tributary = {
			#		TYPE = tributary_permanent
			#		TRIBUTARY = character:malava_01
			#		SUZERAIN = character:900963 
			#	}
			#}
			# Arjunayanas
			#if = {
			#	limit = {
			#		AND = {
			#			exists = character:guptasad_32
			#			exists = character:900963
			#		}
			#	}
			#	make_tributary = {
			#		TYPE = tributary_permanent
			#		TRIBUTARY = character:guptasad_32
			#		SUZERAIN = character:900963 
			#	}
			#}
			# Karttripuras
			if = {
				limit = {
					AND = {
						exists = character:karttripura_01
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:karttripura_01
					SUZERAIN = character:900963 
				}
			}
			# Nepal/Licchavis
			if = {
				limit = {
					AND = {
						exists = character:licchavi_02
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:licchavi_02
					SUZERAIN = character:900963
				}
			}
			# Kamarupa
			if = {
				limit = {
					AND = {
						exists = character:190054
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:190054
					SUZERAIN = character:900963 
				}
			}
			# Davakas
			if = {
				limit = {
					AND = {
						exists = character:davaka_01
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:davaka_01
					SUZERAIN = character:900963 
				}
			}
			# Samatatas
			#if = {
			#	limit = {
			#		AND = {
			#			exists = character:samatata_01
			#			exists = character:900963
			#		}
			#	}
			#	make_tributary = {
			#		TYPE = tributary_permanent
			#		TRIBUTARY = character:samatata_01
			#		SUZERAIN = character:900963 
			#	}
			#}
			# Kosalas
			if = {
				limit = {
					AND = {
						exists = character:orissa_01
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:orissa_01
					SUZERAIN = character:900963 
				}
			}
			#Mahakantara
			if = {
				limit = {
					AND = {
						exists = character:orissa_02
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:orissa_02
					SUZERAIN = character:900963 
				}
			}
			# Salankayanas
			if = {
				limit = {
					AND = {
						exists = character:salankayana_01
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:salankayana_01
					SUZERAIN = character:900963 
				}
			}
			#Avamuktas
			if = {
				limit = {
					AND = {
						exists = character:orissa_06
						exists = character:900963
					}

				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:orissa_06
					SUZERAIN = character:900963 
				}
			}
			#Dhananjayids
			if = {
				limit = {
					AND = {
						exists = character:orissa_08
						exists = character:900963
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:orissa_08
					SUZERAIN = character:900963 
				}
			}
			
			# Abyssinia Tributaries in Kush/Nubia
			if = {
				limit = {
					AND = {
						exists = character:meroitic_misc_01
						exists = character:aksum_12
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:meroitic_misc_01
					SUZERAIN = character:aksum_12 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:dinka_01
						exists = character:aksum_12
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:dinka_01
					SUZERAIN = character:aksum_12 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:dinka_05
						exists = character:aksum_12
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:dinka_05
					SUZERAIN = character:aksum_12 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:dinka_09
						exists = character:aksum_12
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:dinka_09
					SUZERAIN = character:aksum_12 
				}
			}
			character:990016 = {
				add_prestige = 1500
				add_gold = 250
				spawn_army = {
					name = "Hunnic Migrators"
					levies = 1000
					men_at_arms = {
						type = horse_archers
						stacks = 5
					}
					men_at_arms = {
						type = light_footmen
						stacks = 5
					}
					men_at_arms = {
						type = siege_towers
						stacks = 5
					}
					location = title:b_itil.title_province
					inheritable = no
				}
				spawn_army = {
					name = "Hunnic Migrators"
					levies = 1000
					men_at_arms = {
						type = light_horsemen
						stacks = 5
					}
					men_at_arms = {
						type = horse_archers
						stacks = 5
					}
					men_at_arms = {
						type = siege_towers
						stacks = 5
					}
					location = title:b_engels.title_province
					inheritable = no
				}
			}
		}
		if = {
			limit = {
				AND = {
					game_start_date > 394.1.1
					game_start_date < 396.1.1
				}
			}
			###EASTERN ROMAN
			if = {
				limit = {
					AND = {
						exists = character:judham_11
						exists = character:70519
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:judham_11
					SUZERAIN = character:70519 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:amilah_01
						exists = character:70519
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:amilah_01
					SUZERAIN = character:70519 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:lazika_03
						exists = character:70519
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:lazika_03
					SUZERAIN = character:70519 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:tanukhid_011
						exists = character:70519
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:tanukhid_011
					SUZERAIN = character:70519 
				}
			}

			###GUPTAS
			# Madrakas
			#if = {
			#	limit = {
			#		AND = {
			#			exists = character:matraka_01
			#			exists = character:2020123
			#		}
			#	}
			#	make_tributary = {
			#		TYPE = tributary_permanent
			#		TRIBUTARY = character:matraka_01
			#		SUZERAIN = character:2020123 
			#	}
			#}
			# Yaudheyas
			if = {
				limit = {
					AND = {
						exists = character:yaudheya_01
						exists = character:2020123
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:yaudheya_01
					SUZERAIN = character:2020123 
				}
			}
			# Karttripuras
			if = {
				limit = {
					AND = {
						exists = character:karttripura_02
						exists = character:2020123
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:karttripura_02
					SUZERAIN = character:2020123 
				}
			}
			# Nepal/Licchavis
			if = {
				limit = {
					AND = {
						exists = character:licchavi_02
						exists = character:2020123
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:licchavi_02
					SUZERAIN = character:2020123 
				}
			}
			# Kamarupa
			if = {
				limit = {
					AND = {
						exists = character:190055
						exists = character:2020123
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:190055
					SUZERAIN = character:2020123 
				}
			}
			# Davakas
			if = {
				limit = {
					AND = {
						exists = character:davaka_01
						exists = character:2020123
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:davaka_01
					SUZERAIN = character:2020123 
				}
			}
			# Samatatas
			#if = {
			#	limit = {
			#		AND = {
			#			exists = character:samatata_01
			#			exists = character:2020123
			#		}
			#	}
			#	make_tributary = {
			#		TYPE = tributary_permanent
			#		TRIBUTARY = character:samatata_01
			#		SUZERAIN = character:2020123 
			#	}
			#}
		}
		if = {
			limit = {
				game_start_date = 476.9.4
			}
			if = {
				limit = {
					AND = {
						exists = character:996002
						exists = character:70515
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:996002
					SUZERAIN = character:70515
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:tanukhid_03
						exists = character:70515
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:tanukhid_03
					SUZERAIN = character:70515 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:lazika_05
						exists = character:70515
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:lazika_05
					SUZERAIN = character:70515 
				}
			}
			character:strabo_02 ?= {
				spawn_army = {
					name = "Zeno's Auxiliaries"
					levies = 1000
					men_at_arms = {
						type = palatinae
						#type = armored_footmen
						stacks = 2
					}
					men_at_arms = {
						type = comitatenses
						#type = armored_footmen
						stacks = 2
					}
					location = title:c_turnovo.title_province
					inheritable = no
				}
			}
			character:992016 ?= {
				spawn_army = {
					name = "Ostrogoth Invaders"
					levies = 3000
					men_at_arms = {
						type = bowmen
						stacks = 5
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 5
					}
					men_at_arms = {
						type = light_footmen
						stacks = 10
					}
					men_at_arms = {
						type = siege_towers
						stacks = 3
					}
					location = capital_province
					inheritable = no
				}
			}
			character:yujiulu_10 ?= {
				dynasty = {
					add_dynasty_modifier = rouran_khagans
				}
			}
		}
		
		###WESTERN ROMAN AND AFRICAN
		if = {
			limit = {
				AND = {
					game_start_date > 394.1.1
					game_start_date < 396.1.1
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:159009
						exists = character:145227
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:159009
					SUZERAIN = character:145227
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:mauri_18
						exists = character:145227
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:mauri_18
					SUZERAIN = character:145227
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:afroroman_01
						exists = character:145227
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:afroroman_01
					SUZERAIN = character:145227
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:mauri_28
						exists = character:mauri_18
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:mauri_28
					SUZERAIN = character:mauri_18
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:mauri_23
						exists = character:145227
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:mauri_23
					SUZERAIN = character:145227
				}
			}
		}

		if = {
			limit = {
				AND = {
					game_start_date > 360.1.1
					game_start_date < 362.1.1
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:afroroman_01
						exists = character:145237
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:afroroman_01
					SUZERAIN = character:145237
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:mauri_17
						exists = character:145237
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:mauri_17
					SUZERAIN = character:145237
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:arsacid_46
						exists = character:145237
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:arsacid_46
					SUZERAIN = character:145237
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:mauri_27
						exists = character:mauri_17
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:mauri_27
					SUZERAIN = character:mauri_17
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:mauri_22
						exists = character:145237
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:mauri_22
					SUZERAIN = character:145237
				}
			}
			###PERSIANS
			if = {
				limit = {
					AND = {
						exists = character:159582
						exists = character:180617
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:159582
					SUZERAIN = character:180617 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:159758
						exists = character:180617
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:159758
					SUZERAIN = character:180617 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:lakhmid_03
						exists = character:180617
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:lakhmid_03
					SUZERAIN = character:180617 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:khinda_05
						exists = character:himyar_11
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:khinda_05
					SUZERAIN = character:himyar_11
				}
			}
			#character:990016 ?= {
			#	add_gold = 250
			#	spawn_army = {
			#		name = "Hunnic Invaders"
			#		levies = 2000
			#		men_at_arms = {
			#			type = light_horsemen
			#			stacks = 15
			#		}
			#		men_at_arms = {
			#			type = horse_archers
			#			stacks = 15
			#		}
			#		men_at_arms = {
			#			type = siege_towers
			#			stacks = 5
			#		}
			#		location = capital_province
			#		inheritable = no
			#	}
			#	spawn_army = {
			#		name = "Hunnic Invaders"
			#		levies = 1000
			#		men_at_arms = {
			#			type = light_horsemen
			#			stacks = 10
			#		}
			#		men_at_arms = {
			#			type = horse_archers
			#			stacks = 10
			#		}
			#		men_at_arms = {
			#			type = siege_towers
			#			stacks = 5
			#		}
			#		location = capital_province
			#		inheritable = yes
			#	}
			#}
		}
		
		###PERSIAN
		if = {
			limit = {
				AND = {
					game_start_date > 394.1.1
					game_start_date < 396.1.1
				}
			}
			make_tributary = {
				TYPE = tributary_permanent
				TRIBUTARY = character:lakhmid_06
				SUZERAIN = character:180618 
			}
			make_tributary = {
				TYPE = tributary_permanent
				TRIBUTARY = character:159583
				SUZERAIN = character:180618 
			}
			make_tributary = {
				TYPE = tributary_permanent
				TRIBUTARY = character:159761
				SUZERAIN = character:180618 
			}
			make_tributary = {
				TYPE = tributary_permanent
				TRIBUTARY = character:arsacid_58
				SUZERAIN = character:180618 
			}
		}
		if = {
			limit = {
				AND = {
					game_start_date > 475.1.1
					game_start_date < 477.1.1
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:lakhmid_08
						exists = character:180624
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:lakhmid_08
					SUZERAIN = character:180624 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:159766
						exists = character:180624
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:159766
					SUZERAIN = character:180624 
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:159859
						exists = character:180624
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:159859
					SUZERAIN = character:180624 
				}
			}
		}
		
		###GUPTA
		if = {
			limit = {
				AND = {
					game_start_date > 394.1.1
					game_start_date < 396.1.1
				}
			}
			if = {
				limit = {
					AND = {
						exists = character:salankayana_02
						exists = character:2020123
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = character:salankayana_02
					SUZERAIN = character:2020123
				}
			}
		}

		###532 BM Caucasus
		if = {
			limit = {
				AND = {
					game_start_date > 530.1.1
					game_start_date < 540.1.1
				}
			}
			if = {
				limit = {
					AND = {
						exists = title:d_abkhazia.holder
						exists = title:e_byzantium.holder
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = title:d_abkhazia.holder
					SUZERAIN = title:e_byzantium.holder
				}
			}
			if = {
				limit = {
					AND = {
						exists = title:d_georgia.holder
						exists = title:e_persia.holder
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = title:d_georgia.holder
					SUZERAIN = title:e_persia.holder
				}
			}
			if = {
				limit = {
					AND = {
						exists = title:d_albania.holder
						exists = title:e_persia.holder
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = title:d_albania.holder
					SUZERAIN = title:e_persia.holder
				}
			}
			if = {
				limit = {
					AND = {
						exists = title:k_lakhmid.holder
						exists = title:e_persia.holder
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = title:k_lakhmid.holder
					SUZERAIN = title:e_persia.holder
				}
			}
			if = {
				limit = {
					AND = {
						exists = title:k_ghassanid.holder
						exists = title:e_byzantium.holder
					}
				}
				make_tributary = {
					TYPE = tributary_permanent
					TRIBUTARY = title:k_ghassanid.holder
					SUZERAIN = title:e_byzantium.holder
				}
			}
		}

		#I'm too lazy to make another file :p
		if = {
			limit = {
				game_start_date = 476.9.4
			}
			title:k_italy.holder ?= {
				add_gold = 200
				spawn_army = {
					name = "Scirian Invaders"
					levies = 1500
					men_at_arms = {
						type = bowmen
						stacks = 3
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 4
					}
					location = capital_province
					inheritable = no
				}
				spawn_army = {
					name = "Scirian Invaders"
					levies = 1500
					men_at_arms = {
						type = bowmen
						stacks = 3
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 4
					}
					location = capital_province
					inheritable = yes
				}
			}
			title:k_visigoths.holder ?= {
				add_gold = 300
				spawn_army = {
					name = gothic_event_troops
					levies = 2000
					men_at_arms = {
						type = bowmen
						stacks = 2
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 4
					}
					location = capital_province
					inheritable = no
				}
				spawn_army = {
					name = gothic_event_troops
					levies = 2000
					men_at_arms = {
						type = bowmen
						stacks = 2
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 4
					}
					location = capital_province
					inheritable = yes
				}
			}
		}
		else_if = {
			limit = {
				AND = {
					game_start_date > 394.1.1
					game_start_date < 396.1.1
				}
			}
			title:e_western_roman_empire.holder ?= {
				add_gold = 1000
			}
			title:e_byzantium.holder ?= {
				add_gold = 1000
			}
			character:balamer_01 ?= {
				add_prestige = 3000
				spawn_army = {
					name = "Hunnic Invaders"
					levies = 2000
					men_at_arms = {
						type = horse_archers
						stacks = 10
					}
					men_at_arms = {
						type = light_footmen
						stacks = 20
					}
					men_at_arms = {
						type = siege_towers
						stacks = 5
					}
					location = title:b_peremyshl.title_province
					inheritable = no
				}
				spawn_army = {
					name = "Hunnic Invaders"
					levies = 2000
					men_at_arms = {
						type = light_horsemen
						stacks = 10
					}
					men_at_arms = {
						type = horse_archers
						stacks = 10
					}
					men_at_arms = {
						type = light_footmen
						stacks = 10
					}
					men_at_arms = {
						type = siege_towers
						stacks = 5
					}
					location = title:b_stoenesti.title_province
					inheritable = no
				}
			}
			character:990000 ?= {
				spawn_army = {
					name = "Hunnic Invaders"
					levies = 2000
					men_at_arms = {
						type = light_horsemen
						stacks = 10
					}
					men_at_arms = {
						type = horse_archers
						stacks = 10
					}
					men_at_arms = {
						type = siege_towers
						stacks = 5
					}
					location = capital_province
					inheritable = no
				}
			}
			character:yujiulu_072 ?= {
				add_prestige = 500
				spawn_army = {
					name = "Rouran Invaders"
					levies = 1000
					men_at_arms = {
						type = light_horsemen
						stacks = 3
					}
					men_at_arms = {
						type = horse_archers
						stacks = 3
					}
					men_at_arms = {
						type = siege_towers
						stacks = 2
					}
					location = capital_province
					inheritable = yes
				}
			}
		}
	}
}

"common/on_action/TFE_title_on_actions.txt" = {
	{
		if = {
			limit = {
				scope:title = title:k_ostrogoths
				root = { is_greek_or_roman = no }
				NOT = { exists = global_var:gothic_war_won }
				character:992020 = {
					is_alive = yes
					NOT = {
						THIS = root.mother
					}
				}
				OR = {
					debug_log_details = "Check Conditions"
					#root = { has_active_diarchy = yes }
					#scope:title.holder = { has_active_diarchy = yes }
					root = { diarch = character:992020 }
					scope:title.holder = { diarch = character:992020 }
					#character:992020 = { is_diarch = yes }
					#character:992020 = { is_designated_diarch = yes }
					character:992020 = { is_diarch_of_target = root }
					character:992020 = { is_diarch_of_target = scope:title.holder }
				}
			}
			scope:title.holder = {
				trigger_event = {
					id = germanic_events.0019
					days = 1
				}
			}
		}
	}
}

"common/on_action/TFE_yearly_on_actions.txt" = {
	{
		if = {
			limit = {
				current_date > 400.1.1
				current_date < 450.1.1
				NOT = { has_global_variable = attila_spawn }
				title:e_hunnic_empire.holder = {
					is_adult = yes
				}
			}
			random = {
				chance = 30
				modifier = {
					add = 20
					current_date >= 405.1.1
				}
				modifier = {
					add = 20
					current_date >= 410.1.1
				}
				modifier = {
					add = 10
					current_date >= 415.1.1
				}
				set_global_variable = {
					name = attila_spawn
					value = yes
				}
				trigger_event = {
					id = steppe.6666
					days = { 1 2 }
				}
			}
		}
		if = {
			limit = {
				current_date > 533.1.1
				NOT = { has_global_variable = gothic_war_cycle_active }
				exists = title:e_byzantium.holder
				exists = title:k_ostrogoths.holder
				exists = title:k_italy.holder
				title:k_ostrogoths.holder = title:k_italy.holder
				title:k_ostrogoths.holder = {
					is_independent_ruler = yes
				}
				character:992020 = {
					is_alive = yes
					liege = title:k_ostrogoths.holder
				}
				title:k_ostrogoths.holder = {
					has_active_diarchy = yes
					diarch = character:992020
				}
			}
			random = {
				chance = 10
				modifier = {
					add = 10
					current_date >= 534.1.1
				}
				modifier = {
					add = 10
					current_date >= 535.1.1
				}
				modifier = {
					add = 15
					current_date >= 536.1.1
				}
				modifier = {
					add = 15
					current_date >= 537.1.1
				}
				modifier = {
					add = 15
					current_date >= 538.1.1
				}
				title:e_byzantium.holder = {
					trigger_event = {
						id = germanic_events.0032
						days = 1
					}
				}
				set_global_variable = {
					name = gothic_war_cycle_active
					value = yes
				}
				set_global_variable = {
					name = amalasuntha_coup_unlock
					value = yes
				}
			}
		}
		if = {
			limit = {
				current_date > 533.1.1
				NOT = { exists = title:k_ostrogoths.holder }
				exists = title:e_byzantium.holder
				has_global_variable = gothic_war_won
				#NOT = { has_global_variable = has_eternal_peace }
				NOT = { has_global_variable = gothic_war_stalemate }
				title:e_byzantium.holder = {
					any_vassal_or_below = {
						culture = { has_cultural_pillar = heritage_east_germanic }
						any_held_title = {
							OR = {
								tier = tier_county
								tier = tier_duchy
							}
							OR = {
								kingdom = title:k_italy
								kingdom = title:k_italia_annonariae
								kingdom = title:k_italia_suburbicariae
							}
						}
					}
				}
			}
			random = {
				chance = 20
				modifier = {
					add = 10
					current_date >= 540.1.1
				}
				modifier = {
					add = 10
					current_date >= 545.1.1
				}
				modifier = {
					add = 10
					current_date >= 550.1.1
				}
				modifier = {
					add = 30
					character:992029 = {
						is_alive = yes
						age > 15
						OR = {
							is_landed = yes
							title:e_byzantium.holder = {
								any_vassal_or_below = {
									exists = primary_heir
									primary_heir = character:992029
								}
							}
						}
						top_liege = title:e_byzantium.holder
					}
				}
				trigger_event = {
					id = germanic_events.0028
					days = 1
				}
			}
		}
	}
	
	{
		if = {
			limit = {
				AND = {
					game_start_date <= 406.1.1
					current_date >= 406.1.1
					NOT = { exists = global_var:marcus_usurper }
					title:e_western_roman_empire = {
						is_title_created = yes
					}
					title:e_western_roman_empire = {
						OR = {
							any_in_de_facto_hierarchy = {
								THIS = title:k_britannia
							}
							holder = {
								has_title = title:k_britannia
							}
						}
					}
					character:BUsuprer_01 = {
						is_alive = yes
						NOT = {
							has_title = title:k_britannia
						}
					}
				}
			}
			
			character:BUsuprer_01 = {
				trigger_event = briton.0008
				set_global_variable = {
					name = marcus_usurper
					value = yes
				}
			}
		}
	}
	
	{
		if = {
			limit = {
				current_date >= 400.1.1
				NOT = { has_global_variable = radagaisus_has_invaded }
				current_date <= 410.1.1
				NOT = { exists = title:k_goths.holder }
				character:radagaisian_02 = {
					is_alive = yes
				}
			}
			random = {
				chance = 5
				modifier = {
					add = 15
					current_date >= 401.1.1
				}
				modifier = {
					add = 30
					current_date >= 403.1.1
				}
				modifier = {
					add = 40
					current_date >= 405.1.1
				}
				modifier = {
					add = 10
					current_date >= 406.1.1
				}
				set_global_variable = {
					name = radagaisus_has_invaded
					value = yes
				}
				trigger_event = {
					id = gothic_wars.0011
					days = { 30 50 }
				}
			}
		}

		if = {
			limit = {
				current_date >= 400.1.1
				has_global_variable = radagaisus_has_invaded
				NOT = { has_global_variable = goth_migrations }
				current_date <= 420.1.1
			}
			random = {
				chance = 20
				modifier = {
					add = 10
					current_date >= 405.1.1
				}
				modifier = {
					add = 20
					current_date >= 407.1.1
				}
				modifier = {
					add = 40
					current_date >= 409.1.1
				}
				modifier = {
					add = 10
					current_date >= 411.1.1
				}
				set_global_variable = {
					name = goth_migrations
					value = yes
				}
				trigger_event = gothic_wars.0022
				trigger_event = gothic_wars.0023
				trigger_event = gothic_wars.0024
				trigger_event = gothic_wars.0025
			}
		}

		if = {
			limit = {
				game_start_date = 476.9.4
				NOT = { has_global_variable = clovis_invasion }
				OR = {
					AND = {
						character:997004 = {
							is_alive = yes
							is_landed = yes
							is_independent_ruler = yes
							NOT = {
								has_title = title:k_france
							}
							trigger_if = {
								limit = {
									title:k_france = {
										is_title_created = yes
									}
								}
								NOT = {
									OR = {
										is_allied_to = title:k_france.holder
										AND = {
											exists = var:my_suzerain
											var:my_suzerain = title:k_france.holder
											var:my_suzerain = {
												OR = {
													is_target_in_variable_list = { name = non_permanent_tributaries target = prev }
													is_target_in_variable_list = { name = permanent_tributaries target = prev }
												}
											}
										}
									}
								}
							}
						}
						character:997005 = {
							NOT = {
								has_title = title:k_france
							}
						}
					}
					AND = {
						character:997005 = {
							is_alive = yes
							is_landed = yes
							is_independent_ruler = yes
							NOT = {
								has_title = title:k_france
							}
						}
						character:997004 = {
							NOT = {
								has_title = title:k_france
							}
						}
					}
				}
				AND = {
					title:k_france = {
						is_title_created = yes
					}
					title:k_france.holder = {
						culture = culture:gallo_roman
					}
				}
				current_date <= 500.1.1
			}
			random = {
				chance = 0
				modifier = {
					add = 5
					current_date >= 478.1.1
				}
				modifier = {
					add = 10
					current_date >= 479.1.1
				}
				modifier = {
					add = 35
					current_date >= 480.1.1
				}
				modifier = {
					add = 50
					current_date >= 481.1.1
				}
				set_global_variable = {
					name = clovis_invasion
					value = yes
				}
				if = {
					limit = {
						character:997004 = {
							is_alive = yes
							is_landed = yes
							is_independent_ruler = yes
						}
					}
					character:997004 = {
						trigger_event = germanic_events.0003
					}
				}
				else_if = {
					limit = {
						character:997005 = {
							is_alive = yes
							is_landed = yes
							is_independent_ruler = yes
						}
					}
					character:997005 = {
						trigger_event = germanic_events.0003
					}
				}
			}
		}
	}
}

"common/on_action/death.txt" = {
	{
		# Fix gods-damned Bavaria splitting from East Francia in an ugly fashion in 867.
		if = {
			limit = {
				# Make sure we're looking at the right guy & that the circumstances haven't changed too much.
				this = character:90107
				highest_held_title_tier = tier_kingdom
				has_realm_law = confederate_partition_succession_law
				# Bavaria should be in a fit state for interfering with the handout order.
				title:k_bavaria = {
					OR = {
						is_title_created = no
						holder = root
					}
					any_in_de_jure_hierarchy = {
						tier = tier_county
						# More than 50%.
						count >= 22
						holder = {
							any_liege_or_above = { this = root }
						}
					}
				}
				NOT = { has_primary_title = title:k_bavaria }
				# Players can sort this themselves: you just need to have Bavaria as your primary title and it's all fine.
				is_ai = yes
			}
			# If we've got no Bavaria, create it.
			if = {
				limit = {
					title:k_bavaria = { is_title_created = no }
				}
				create_title_and_vassal_change = {
					type = created
					save_scope_as = change
				}
				title:k_bavaria = {
					change_title_holder = {
						holder = root
						change = scope:change
					}
				}
				resolve_title_and_vassal_change = scope:change
			}
			# Then switch around.
			set_primary_title_to = title:k_bavaria
		}
	}
}

"common/on_action/diarchy_on_action.txt" = {
	{
		if = {
			limit = {
				scope:old_diarch = character:992020
				exists = title:e_byzantium.holder
				NOT = { has_global_variable = gothic_war_cycle_active }
				NOT = { has_global_variable = gothic_war_cycle_prep }
			}
			if = {
				limit = {
					character:992020 = {
						is_alive = no
					}
				}
				title:e_byzantium.holder = {
					trigger_event = {
						id = germanic_events.0023
						days = 1
					}
				}
			}
			else_if = {
				limit = {
					root = {
						mother = character:992020
					}
				}
				root = {
					trigger_event = {
						id = germanic_events.0021
						days = 1
					}
				}
				title:e_byzantium.holder = {
					trigger_event = {
						id = germanic_events.0022
						days = 1
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						root = {
							mother = character:992020
						}
					}
				}
				root = {
					trigger_event = {
						id = germanic_events.0020
						days = 1
					}
				}
				title:e_byzantium.holder = {
					trigger_event = {
						id = germanic_events.0022
						days = 1
					}
				}
			}
		}
	}
}

"common/on_action/title_on_actions.txt" = {
	{
		# Am I The Chad?
		if = {
			limit = { root = character:easteregg_chad_uhl }
			set_house = house:house_chad_uhl
		}
	}
}

"common/scripted_triggers/tfe_culture_triggers.txt" = {
	{
		dynasty = dynasty:nuvelan
	}
}

"gfx/portraits/portrait_modifiers/50_hairstyles_scripted_characters.txt" = {
	{
            	modifier = {
               	add = 999
                exists = this
		        exists = character:aksum_17 #eon
		        this = character:aksum_17 #eon
	        }
	}
	{
            	modifier = {
               	add = 999
                exists = this
		        exists = character:himyarite_30 #Abraha
		        this = character:himyarite_30 #Abraha
	        }
	}
	{
            modifier = {
                add = 999
		        exists = this
                exists = character:142 #robert_curthose
                this = character:142 #robert_curthose
            }
	}
	{
            modifier = {
                add = 999
                exists = this
                exists = character:70515  #Zeno
                this = character:70515  #Zeno
            }
	}
	{
            modifier = {
                add = 999
                exists = this
                exists = character:vigg_04 #Hengest
                this = character:vigg_04 #Hengest
            }
	}
	{
            modifier = {
                add = 999
                exists = this
                exists = character:syagri_06 #Syagrus
                this = character:syagri_06 #Syagrus
            }
	}
	{
	    modifier = {
                add = 999
                exists = this
                exists = character:rugian_03 #Feletheus
                this = character:rugian_03 #Feletheus
            }
	}
	{
            modifier = {
                add = 999
				exists = this
				exists = character:6878 #jarl_haesteinn
				this = character:6878 #jarl_haesteinn
            }
	}
	{
            modifier = {
                add = 999
                exists = this
                exists = character:aelling_01 #Aelle
                this = character:aelling_01 #Aelle
            }
	}
	{
            modifier = {
                add = 999
				exists = this
				exists = character:6448 #count_eudes
				this = character:6448 #count_eudes
            }
	}
	{
            modifier = {
                add = 999
				exists = this
                exists = character:107500 #king_sancho
                this = character:107500 #king_sancho
            }
	}
	{
            modifier = {
                add = 999
				exists = this
                exists = character:214 #king_philippe
                this = character:214 #king_philippe
            }
	}
}

"common\casus_belli_types\TFE_event_wars.txt" = {
	{
							NOT = { THIS = character:vandals_012 }
	}
	{
			if = {
				limit = {
					character:armenian_02 = {
						is_alive = yes
					}
				}
				add_courtier = character:armenian_02
			}
	}
}

"common\decisions\TFE_major_decisions_south_asia.txt" = {
	{
# Restore the main branch of the Vakataka Dynasty

reclaim_vakataka_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"

	desc = reclaim_vakataka_decision_desc
	selection_tooltip = reclaim_vakataka_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		dynasty = dynasty:900024
		NOT = { house = character:900900.house } #Not a member of the OG Vakatakas
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_vakataka_decision
			}
		}
	}

	is_valid = {
		is_independent_ruler = yes
		prestige_level >= 4
		completely_controls = title:k_maharastra
		completely_controls = title:k_telingana
		completely_controls = title:k_karnata
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
		is_landed = yes
	}
	
	cost = {
		prestige = 850
		piety = 500
	}

	effect = {
		hidden_effect = { ROOT.house = { every_house_member = { set_house = character:900900.house } } }
		set_house = character:900900.house
		add_pressed_claim = title:e_deccan
		add_pressed_claim = title:k_gondwana
		add_pressed_claim = title:d_jejakabhukti
		add_pressed_claim = title:d_akara_dasarna
		save_scope_as = founder
		trigger_event = {
			id = tfe_south_asia_decision.2001
			}
		#Notify other Vakatakas
		every_player = {
			limit = {
				dynasty = dynasty:900024
			}
			trigger_event = tfe_south_asia_decision.2002
			}
		}

		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:reclaim_vakataka_decision
			}
		}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
	}
	{
#Restore the Three Crowned Kings
muvendhar_restoration_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_dynasty_house.dds"

	desc = muvendhar_restoration_decision_desc
	selection_tooltip = muvendhar_restoration_decision_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		is_ruler = yes
		is_landed = yes
		OR = {
			culture = culture:tamil
			culture = culture:malaiya
			culture = culture:sinhala
			culture = { any_parent_culture_or_above = { this = culture:tamil }}
			culture = { any_parent_culture_or_above = { this = culture:malaiya }}
			culture = { any_parent_culture_or_above = { this = culture:sinhala }}
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:muvendhar_restoration_decision
			}
		}
	}
	
	is_valid = {
		is_independent_ruler = yes
		has_title = title:k_tamilakam
		prestige_level >= 3
		title:d_chola_nadu.holder.dynasty = dynasty:1043008
		title:d_pandya_nadu.holder.dynasty = dynasty:1043009
		title:d_chera_nadu.holder.dynasty = dynasty:1043010
		NOT = { dynasty = dynasty:900026 }
		completely_controls = title:d_chola_nadu
		completely_controls = title:d_pandya_nadu
		completely_controls = title:d_chera_nadu
	}

	is_valid_showing_failures_only = {
		is_capable_adult = yes
		is_imprisoned = no
		is_at_war = no
	}

	cost = {
		prestige = 750
		piety = 500
	}

	effect = {
		if = {
			limit = {
				NOR = {
					dynasty = dynasty:1043008
					dynasty = dynasty:1043009
					dynasty = dynasty:1043010
				}
			}
			dynasty = { add_dynasty_prestige = 500 }
		}
		dynasty:1043008 = { add_dynasty_prestige = 500 }
		dynasty:1043009 = { add_dynasty_prestige = 500 }
		dynasty:1043010 = { add_dynasty_prestige = 500 }
		save_scope_as = founder
		trigger_event = tfe_south_asia_decision.4001
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:muvendhar_restoration_decision
			}
		}
	}
	
	ai_potential = {
		always = yes
	}

	ai_will_do = {
		base = 100
	}
}
	}
}

"common\decisions\TFE_rome_decisions.txt" = {
	{
recall_belisarius = {
	picture = "gfx/interface/illustrations/decisions/decision_roman_knight.dds"
	major = yes

	ai_check_interval = 12

	desc = recall_belisarius_desc
	selection_tooltip = recall_belisarius_tooltip

	is_shown = {
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:recall_belisarius
			}
		}
		OR = {
			root = global_var:justinian
			has_trait = paranoid
		}
		has_global_variable = vandalic_war_won
		current_date >= 530.1.1
		current_date <= 600.1.1
		character:belisarius_001 = title:k_africae.holder
		game_start_date = 532.2.1
	}

	is_valid = {
		OR = {
			has_title = title:e_byzantium
			has_title = title:e_roman_empire
		}
		exists = title:k_africae.holder
		title:k_africae.holder = {
			is_vassal_of = root
		}
	}

	effect = {
		root = {
			save_scope_as = emperor
		}
		title:k_africae.holder = {
			save_scope_as = belisarius
		}
		custom_tooltip = recall_belisarius_warning
		character:belisarius_001 = {
			add_opinion = {
				modifier = angry_opinion
				target = root
				opinion = -20
			}
			trigger_event = {
				id = western_roman.0044
				days = 1
			}
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:recall_belisarius
		}
	}

	cost = {
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				add = {
					value = 500
				}
			}
		}
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				add = {
					value = 250
				}
			}
		}
	}

	ai_potential = {
		is_at_war = no
	}
	ai_will_do = {
		base = 100
	}
}
	}
	
	{
start_amalasuntha_coup = {
	picture = "gfx/interface/illustrations/decisions/decision_destiny_goal.dds"
	major = yes

	ai_check_interval = 1

	desc = start_amalasuntha_coup_desc
	selection_tooltip = start_amalasuntha_coup_tooltip

	is_shown = {
		OR = {
			has_title = title:e_byzantium
			has_title = title:e_roman_empire
		}
		NOT = {
			exists = global_var:gothic_war_declared
		}
		exists = global_var:amalasuntha_coup_unlock
		current_date >= 530.1.1
		current_date <= 600.1.1
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:started_gothic_war
			}
		}
		character:992020 = {
			is_alive = yes
			liege = title:k_ostrogoths.holder
		}
		title:k_ostrogoths.holder = {
			has_active_diarchy = yes
			diarch = character:992020
		}
		game_start_date = 532.2.1
	}

	is_valid = {
		trigger_if = {
			limit = {
				is_ai = yes
			}
			is_at_war = no
		}
		trigger_if = {
			limit = {
				is_ai = yes
				character:belisarius_001 = {
					is_ai = no
				}
			}
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:recall_belisarius
			}
		}
	}

	effect = {
		root = {
			save_scope_as = emperor
			trigger_event = {
				id = germanic_events.0033
				days = 1
			}
		}
		custom_tooltip = gothic_war_belisarius_warning
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:started_gothic_war
		}
	}

	cost = {
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				add = {
					value = 250
				}
			}
		}
	}

	ai_potential = {
		always = yes
	}
	ai_will_do = {
		base = 100
	}
}

	}
	
	{
vandalic_war = {
	picture = "gfx/interface/illustrations/decisions/decision_vandalic_war.dds"
	major = yes

	ai_check_interval = 12

	desc = vandalic_war_desc
	selection_tooltip = vandalic_war_tooltip

	is_shown = {
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:vandalic_war
			}
		}
		exists = title:k_vandals
		has_title = title:e_byzantium
		current_date >= 530.1.1
		game_start_date = 532.2.1
		OR = {
			character:vandals_005 = {
				is_alive = yes
			}
			AND = {
				current_date <= 550.1.1
				any_courtier = {
					has_claim_on = title:k_vandals
				}
			}
		}
	}

	effect = {
		custom_tooltip = vandalic_war_decision_1
		custom_tooltip = vandalic_war_decision_2
		custom_tooltip = vandalic_war_decision_3

		hidden_effect = {
			every_vassal = {
				add_opinion = {
					modifier = respect_opinion
					target = root
					opinion = -20
				}
			}
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:vandalic_war
			}
			trigger_event = {
				id = western_roman.0039
				days = 1
			}
		}
	}

	cost = {
		prestige = {
			if = {
				limit = {
					is_ai = no
				}
				add = {
					value = 750
				}
			}
		}
		gold = {
			if = {
				limit = {
					is_ai = no
				}
				add = {
					value = 250
				}
			}
		}
	}

	ai_potential = {
		is_at_war = no
	}
	ai_will_do = {
		base = 100
	}

}
	}
}


"common/decisions/tfe_culture_decisions.txt" = {
	{
dong_zhuo_culture_decision = {
	ai_check_interval = 0
	is_shown = {
		has_game_rule = larp_enabled
		NOT = {
			culture = {
				this = culture:soissons
			}
		}
		dynasty = dynasty:syagri
		game_start_date = 395.1.17
	}
	is_valid = {
		culture = { has_cultural_pillar = heritage_levantine }
		custom_description = {
			text = soissonstrigger1
			culture = { any_parent_culture_or_above = { this = culture:han } }
		}
		dynasty = dynasty:syagri
		has_title = title:k_israel
		custom_description = {
			text = soissonstrigger2
			current_date = 690.4.20
		}
	}
	effect = {
		save_scope_as = soi
		#Convert your, and your whole family's, culture
		set_culture = culture:soissons
		add_prestige = 10000
		hidden_effect = {
			if = {
				limit = { any_spouse = { is_landed = no } }
				every_spouse = {
					limit = {
						is_landed = no
					}
					set_culture = culture:soissons
				}
			}
			if = {
				limit = {
					any_close_family_member = {
						is_landed = no
						NOT = { is_spouse_of = root }
					}
				}
				every_close_family_member = {
					limit = {
						is_landed = no
						NOT = { is_spouse_of = root }
					}
					custom = all_unlanded_family_members
					set_culture = culture:soissons
				}
			}

			#Convert appropriate vassals, and their family
			if = {
				limit = {
					any_vassal_or_below = {
						is_ai = yes
					}
				}
				every_vassal_or_below = {
					limit = {
						is_ai = yes
					}
					set_culture = culture:soissons
				}
			}

			#Flip Counties
			every_realm_county = {
				set_county_culture = culture:soissons
			}

			culture:soissons = {
				hidden_effect = {
					reset_culture_creation_date = yes
					get_all_innovations_from = culture:han
					get_all_innovations_from = culture:hebrew
				}
			}

			trigger_event = tfe_culture.9900
		}
	}
	cost = { gold = 69 }
}
	}
}
